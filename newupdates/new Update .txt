
# üá¨üáß **Final Prompt for Claude (Professional & Precise)**

**Project:** SoundAurora ‚Äì TTS Update Package
**Files:** `index.html`, `style.css`, `main.js`
**Critical Rule:** **Do not rewrite from scratch.** Apply **patches only**. Do **not** change the theme/animations/layout. Keep existing IDs/classes.

## 0) General Rules

* **No full rewrites**; patch the existing codebase only.
* Keep the **TR/EN language toggle** behavior intact.
* All changes must be fully **responsive** across Windows/Mac/iOS/Android/phones/tablets.
* Theme stays neon gold (#FFD700) + black; preserve current cards and glow/hover vibe.

## 1) Add **Download** button (TTS)

* In `index.html`, add a button `id="ttsDownload"` in the TTS action row.

  * Text: **EN:** ‚ÄúDownload‚Äù / **TR:** ‚Äúƒ∞ndir‚Äù.
* In `main.js`:

  * **Server TTS** (blob): show `ttsDownload` and save as **`soundaurora-tts.wav`** on click (no persistent server storage).
  * **Browser TTS** (Web Speech API): keep `ttsDownload` **hidden**.

## 2) Show **All Voices** (no language filtering)

* In `loadVoicesForLanguage()` (or equivalent), **remove language filtering**.
* Merge **server voices** (`/api/voices`) + **browser voices** into one list.
* Keep language codes visible in labels (e.g., `Google Deutsch (de-DE)`, `Microsoft Tolga (tr-TR)`).
* UI language toggle changes **UI texts only**; the **voice list never resets/narrows**.

## 3) **Gender buttons** and filtering

* Add two buttons above the voice list (left‚Üíright):

  * **EN:** `Male` / `Female`
  * **TR:** `Erkek` / `Kadƒ±n`
* When a gender is selected, show **only that gender** across **all languages**.
* If `/api/voices` lacks `gender`, **infer by name** (fallback).
* Default active: **EN UI:** `Male`, **TR UI:** `Erkek`.

## 4) Reading behavior (Text ‚Üí Speech)

* Read **exactly** the user text (trim only). **No transliteration/auto-translate.**
* **Server TTS:** send text as-is.
* **Browser TTS:** `utterance.voice = selectedVoice`; **do not override** with UI language.
* Defaults: **Rate = 0.97**, **Pitch = 1.05**, **step = 0.05**.

## 5) TR/EN language toggle integration

* Keep existing toggle logic.
* Toggling language **MUST NOT** reset/filter the voice list.
* Gender button labels must switch with UI language (EN‚ÜîTR).

## 6) **Rate & Pitch** controls (add)

* `index.html` ‚Üí inside `#ttsSection` form:

  * **Rate** slider: min `0.5`, max `2`, step `0.05`, **default `0.97`**.
  * **Pitch** slider: min `0.5`, max `2`, step `0.05`, **default `1.05`**.
  * Labels: **EN:** `Rate` / `Pitch`, **TR:** `Hƒ±z` / `Ton`.
  * Side-by-side on desktop; **stack vertically on ‚â§768px**.
* `main.js`:

  * Bind `utterance.rate` and `utterance.pitch` to these sliders.
  * Initialize defaults to the above values.

## 7) **License footer** (EN & TR + links)

* Add license footer at the bottom of `index.html`.
* Text:

  * **EN:** ‚Äúüîä All voices are license-free ‚Äî Details‚Äù
  * **TR:** ‚Äúüîä T√ºm sesler lisans gerektirmez ‚Äî Detaylar‚Äù
* Tooltip/content (same list, heading localized):

  * Piper TTS (Apache-2.0) ‚Äì GitHub
  * Piper Voices Models ‚Äì HuggingFace
  * OpenVoice (MIT) ‚Äì GitHub
  * Vosk STT (Apache-2.0) ‚Äì Official site
* Links: `target="_blank" rel="noopener"`.

## 8) Responsive & Accessibility

* **Download**, **gender segmented buttons**, and the **expanded voice list** must render correctly on all devices.
* **‚â§768px**: stack controls vertically with spacing.
* Keep focus/hover states consistent with gold/black theme.

## 9) Performance (avoid UI freeze)

* **Do not block the UI** while loading voices:

  * Immediately render **‚ÄúLoading‚Ä¶‚Äù** in the dropdown,
  * Fetch server + browser voices **asynchronously**,
  * Populate options **incrementally** (use `requestAnimationFrame` if needed).
* Use **`voiceschanged`** for `speechSynthesis.getVoices()`; avoid redundant fetch/renders.
* Language toggle / gender filtering **only filter the in-memory list** (no extra network calls).
* Make global `scroll/resize/input` handlers **passive + debounced**.

## 10) Visibility flow (no black screen)

* When opening TTS, **do not hide** `mainContent`; hide **`#featuresSection`** only and show **`#ttsSection`**.
* On back, hide `#ttsSection` and show `#featuresSection`.
* **Respect these IDs:** `#ttsSection`, `#ttsText`, `#ttsVoice`, `#ttsRate`, `#ttsPitch`, `#ttsPlay`, `#ttsStop`, `#ttsBack`, `#ttsDownload`.

## 11) Deployment

* Apply **all** updates in this package **plus** the previous **‚Äúnew Update .txt‚Äù** patches.
* Do **not** modify anything beyond these patches; **no rewrites**.
* Push final code to **GitHub**.

### ‚úÖ Acceptance Checks

* Toggling TR/EN **does not** change the voice list (UI texts only).
* **Gender** filter works **across all languages**.
* After **Server TTS**, **Download** appears and saves `.wav`; it stays hidden for **Browser TTS**.
* **Rate/Pitch** sliders work with defaults (0.97 / 1.05, step 0.05); playback reflects values.
* No black/blank screen in TTS open/close flow.
* Mobile stacks controls vertically; theme intact.
* Smooth first open (async + incremental voice loading).

---

